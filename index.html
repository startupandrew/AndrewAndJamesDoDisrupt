<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Unplugged!</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Le styles -->
  <link href="css/bootstrap.css" rel="stylesheet">
  <link href="css/bootstrap-responsive.css" rel="stylesheet">
  <link href="css/app.css" rel="stylesheet">

  <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <!-- Fav and touch icons -->
  <link rel="shortcut icon" href="ico/favicon.ico">
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="ico/apple-touch-icon-144-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="ico/apple-touch-icon-114-precomposed.png">
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="ico/apple-touch-icon-72-precomposed.png">
  <link rel="apple-touch-icon-precomposed" href="ico/apple-touch-icon-57-precomposed.png">

  <!-- Scripts -->
  <script src="js/gen_validatorv4.js" type="text/javascript"></script>
</head>

<body>

<div class="container">
  <div class="row pagination-centered">
      <img src="img/plug.png" class="logo" />
  </div>
  <div class="row">
    <span class="span6 offset3 pagination-centered mainOutline">
      <p class="pronpt">Join a presentation by entering your code:</p>
      <input type="text" id="codeEntry1" class="codeEntry" name="codeEntry1" maxlength="1" />
      <input type="text" id="codeEntry2" class="codeEntry" name="codeEntry2" maxlength="1" />
      <input type="text" id="codeEntry3" class="codeEntry" name="codeEntry3" maxlength="1" />
      <input type="text" id="codeEntry4" class="codeEntry" name="codeEntry4" maxlength="1" />
    </span>
  </div>

  <div class="row pagination-centered or">
    <p>or</p>
  </div>

  <div class="row">
    <span class="span6 offset3 pagination-centered mainOutline">
      <p class="pronpt">Start controlling this screen!:</p>
      <p id="number">1234</p>
    </span>
  </div>

  <div class="row pagination-centered or">
    <p>or</p>
  </div>

  <div class="row">
    <span class="span6 offset3 pagination-centered mainOutline">
      <a href="create.html" class="createPresentation">Create a presentation!</a>
    </span>
  </div>

  <div class="row">
    <span class="span8 offset2 bottom">
      <div class="row-fluid">
        <span class="span6">
          <p><a href="about.html">Learn more about Unplugged!</a></p>
        </span>
        <span class="span6 pagination-right">
          <p>A TechCrunch Disrupt product powered by <a href="http://twitter.com/firebase" target="_blank">Firebase</a>.</p>
        </span>
      </div>
    </span>
  </div>

</div> <!-- /container -->

<!-- Le javascript
================================================== -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script type="text/javascript">
  $('input').keypress(function(e) {
    var a = [];
    var k = e.which;

    for (i = 46; i < 58; i++) {
      a.push(i);
    }

    if (!(a.indexOf(k)>=0))
    {
      e.preventDefault();
    }
    else
    {
      //Move to the next textBox
      shiftFocus(e.currentTarget.id);
    }
  });

  //Check when we've entered the code, then called loadPresentation
  $(function() {
    var content = $("#" + entryBoxList[entryBoxList.length - 1]).val();

    $("#" + entryBoxList[entryBoxList.length - 1]).keyup(function() {
      if ($("#" + entryBoxList[entryBoxList.length - 1]).val() != content) {
        content = $("#" + entryBoxList[entryBoxList.length - 1]).val();
        var presentationCode = "";
        for ( var j = 0; j < entryBoxList.length; j++ )
        {
          presentationCode += $("#" + entryBoxList[j]).val();
        }
        loadPresentation(presentationCode);
      }
    });
  });

  var entryBoxList = ["codeEntry1", "codeEntry2", "codeEntry3", "codeEntry4"];

  function shiftFocus(fromField)
  {
    for ( var i = 0; i < entryBoxList.length; i++)
    {
      //Move focus to the next text box
      if ( fromField === entryBoxList[i] )
      {
        $("#" + entryBoxList[i+1]).focus();
      }
    }
  }

  $(function(){
    $("#" + entryBoxList[0]).focus();
  });

  function loadPresentation(presentationCode) {
    //TODO: Andrew, put the code to run the presentation here.
    console.log(presentationCode);
  }

</script>
</body>
</html>
